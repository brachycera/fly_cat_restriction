# Name: fly_cat_restriction v1.1 
# Type: Admin plugin
# Restrict Article Categories for Sections in Write Panel
# Author: Superfly
# URL: http://www.flyweb.at
# Recommended load order: 5

# .....................................................................
# This is a plugin for Textpattern CMS - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# .....................................................................

YToxMTp7czo0OiJuYW1lIjtzOjE5OiJmbHlfY2F0X3Jlc3RyaWN0aW9uIjtzOjY6ImF1dGhv
ciI7czo4OiJTdXBlcmZseSI7czoxMDoiYXV0aG9yX3VyaSI7czoyMDoiaHR0cDovL3d3dy5m
bHl3ZWIuYXQiO3M6NzoidmVyc2lvbiI7czozOiIxLjEiO3M6MTE6ImRlc2NyaXB0aW9uIjtz
OjU1OiJSZXN0cmljdCBBcnRpY2xlIENhdGVnb3JpZXMgZm9yIFNlY3Rpb25zIGluIFdyaXRl
IFBhbmVsIjtzOjQ6ImNvZGUiO3M6MTI4MDE6Ii8qKg0KICoNCiAqIFRleHRwYXR0ZXJuIENN
UyBQbHVnaW4gPHd3dy50ZXh0cGF0dGVybi5jb20+DQogKg0KICogZmx5X2NhdF9yZXN0cmlj
dGlvbi5waHANCiAqIEZseXdlYiBDYXRlZ29yaWVzIFJlc3RyaWN0aW9uIFBsdWdpbg0KICoN
CiAqIFRoaXMgUGx1Z2luIGlzIGZvciB0aGUgQ01TIFdyaXRlIFBhbmVsLiBJdCBjYW4gZGVh
Y3RpdmF0ZSBDYXRlZ29yeQ0KICogTmFtZXMgcmVsYXRpdmUgdG8gU2VjdGlvbnMgTmFtZXMu
DQogKg0KICogQGF1dGhvciBmbHl3ZWIgcHJvZHVjdGlvbnMgPHd3dy5mbHl3ZWIuYXQ+DQog
KiBAY29weXJpZ2h0IDIwMTUgZmx5d2ViIHByb2R1Y3Rpb25zDQogKiBAbGljZW5zZSBodHRw
Oi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUIC0gTUlUIExpY2Vuc2UgKE1JVCkNCiAq
IEB2ZXJzaW9uIDEuMSA8aHR0cHM6Ly9naXRodWIuY29tL2JyYWNoeWNlcmEvZndfY2F0X3Jl
c3RyaWN0aW9uPg0KICoNCiAqLw0KDQppZiAodHhwaW50ZXJmYWNlID09PSAnYWRtaW4nKSB7
DQoNCglhZGRfcHJpdnMoJ2ZseV9jYXRfcmVzdHJpY3Rpb24nLCcxJyk7DQoJYWRkX3ByaXZz
KCdwbHVnaW5fcHJlZnMuZmx5X2NhdF9yZXN0cmljdGlvbicsICcxJyk7DQoNCglyZWdpc3Rl
cl90YWIoImV4dGVuc2lvbnMiLCAiZmx5X2NhdF9yZXN0cmljdGlvbiIsICdDYXRlZ29yeSBS
ZXN0cmljdGlvbnMnKTsNCg0KCXJlZ2lzdGVyX2NhbGxiYWNrKCdmbHlfY2F0X3Jlc3RyaWN0
aW9uJywgJ3BsdWdpbl9saWZlY3ljbGUuZmx5X2NhdF9yZXN0cmljdGlvbicsICdpbnN0YWxs
ZWQnKTsNCglyZWdpc3Rlcl9jYWxsYmFjaygnZmx5X2NhdF9yZXN0cmljdGlvbicsICdwbHVn
aW5fbGlmZWN5Y2xlLmZseV9jYXRfcmVzdHJpY3Rpb24nLCAnZGVsZXRlZCcpOw0KCXJlZ2lz
dGVyX2NhbGxiYWNrKCdmbHlfY2F0X3Jlc3RyaWN0aW9uJywgJ3BsdWdpbl9wcmVmcy5mbHlf
Y2F0X3Jlc3RyaWN0aW9uJyk7DQoJcmVnaXN0ZXJfY2FsbGJhY2soJ2ZseV9jYXRfcmVzdHJp
Y3Rpb24nLCAnYXJ0aWNsZV91aScsJ3NvcnRfZGlzcGxheScpOw0KCXJlZ2lzdGVyX2NhbGxi
YWNrKCdmbHlfY2F0X3Jlc3RyaWN0aW9uJywgJ2ZseV9jYXRfcmVzdHJpY3Rpb24nKTsNCg0K
fQ0KDQovKioNCiAqDQogKiBmbHlfY2F0X3Jlc3RyaWN0aW9uIC0gUGx1Z2luIEZhY3Rvcnkg
RnVuY3Rpb24NCiAqDQogKiBAcGFyYW0gIHN0cmluZyAkZXZlbnQgLSBUZXh0cGF0dGVybiBF
dmVudCBDYWxsYmFjayBQYXJhbWV0ZXINCiAqIEBwYXJhbSAgc3RyaW5nICRzdGVwIC0gVGV4
dHBhdHRlcm4gU3RlcCBDYWxsYmFjayBQYXJhbWV0ZXINCiAqDQogKi8NCmZ1bmN0aW9uIGZs
eV9jYXRfcmVzdHJpY3Rpb24oJGV2ZW50LCAkc3RlcCl7DQoNCgkkZmx5X2NhdF9yZXN0cmlj
dGlvbiA9ICBuZXcgZmx5X2NhdF9yZXN0cmljdGlvbkNsYXNzKCk7DQoNCglzd2l0Y2ggKCRz
dGVwKSB7DQoNCgkJY2FzZSAnaW5zdGFsbGVkJzoNCgkJCSRmbHlfY2F0X3Jlc3RyaWN0aW9u
LT5pbnN0YWxsKCk7DQoJCQlicmVhazsNCg0KCQljYXNlICdkZWxldGVkJzoNCgkJCSRmbHlf
Y2F0X3Jlc3RyaWN0aW9uLT51bmluc3RhbGwoKTsNCgkJCWJyZWFrOw0KDQoJCWNhc2UgJ3Nh
dmUnOg0KCQkJJGZseV9jYXRfcmVzdHJpY3Rpb24tPmFkbWlucGFnZSgpOw0KCQkJYnJlYWs7
DQoNCgkJY2FzZSAnc2F2ZVByZWYnOg0KCQkJJGZseV9jYXRfcmVzdHJpY3Rpb24tPnNhdmVQ
cmVmKCk7DQoJCQlicmVhazsNCg0KCQljYXNlICdzb3J0X2Rpc3BsYXknOg0KCQkJJGZseV9j
YXRfcmVzdHJpY3Rpb24tPmphdmFzY3JpcHQoKTsNCgkJCWJyZWFrOw0KDQoJCWRlZmF1bHQ6
DQoJCQkkZmx5X2NhdF9yZXN0cmljdGlvbi0+YWRtaW5wYWdlKCk7DQoJCQlicmVhazsNCg0K
CX0NCg0KCXJldHVybjsNCg0KfQ0KDQoNCi8qKg0KICoNCiAqIGZseV9jYXRfcmVzdHJpY3Rp
b25DbGFzcw0KICoNCiAqIFRoaXMgUGx1Z2luIGFkZHMgdGhlIGFiaWxpdHkgdG8gcmVzdHJp
Y3QgQ2F0ZWdvcmllcyBmcm9tIHNwZWNpZmljIFNlY3Rpb25zIGluIHRoZSBXcml0ZSBUYWIN
CiAqDQogKg0KICogQHZlcnNpb24gMS4wDQogKiBAYXV0aG9yIFN1cGVyZmx5IDx3d3cuZmx5
d2ViLmF0Pg0KICogQHByb2plY3QgVGV4dHBhdHRlcm4gQWRtaW4gUGx1Z2luDQogKg0KICov
DQpjbGFzcyBmbHlfY2F0X3Jlc3RyaWN0aW9uQ2xhc3Mgew0KDQoNCgkvKioNCgkgKg0KCSAq
IF9fY29uc3RydWN0DQoJICogQWRkcyBUaGVtZSBDbGFzcw0KCSAqDQoJICovDQoJZnVuY3Rp
b24gX19jb25zdHJ1Y3QoKXsNCg0KCQlnbG9iYWwgJHRoZW1lOw0KCQkkdGhpcy0+dGhlbWUg
PSAkdGhlbWU7DQoNCgl9DQoNCg0KCS8qKg0KCSAqDQoJICogSW5zdGFsbCBEYXRhYmFzZSBU
YWJsZSB0eHBfZmx5X2NhdF9yZXN0cmljdGlvbg0KCSAqDQoJICovDQoJZnVuY3Rpb24gaW5z
dGFsbCgpIHsNCg0KCQlpZiAoIWdldFRoaW5ncygiU2hvdyB0YWJsZXMgbGlrZSAnIiAuIFBG
WCAuICJ0eHBfZmx5X2NhdF9yZXN0cmljdGlvbiciKSkgew0KDQoJCQkvL2ZpZ3VyZSBvdXQg
d2hhdCBNeVNRTCB2ZXJzaW9uIHdlIGFyZSB1c2luZyAoZnJvbSBfdXBkYXRlLnBocCkNCgkJ
CSRteXNxbHZlcnNpb24gPSBteXNxbF9nZXRfc2VydmVyX2luZm8oKTsNCg0KCQkJJHRhYmxl
dHlwZSA9ICggaW50dmFsKCRteXNxbHZlcnNpb25bMF0pID49IDUgfHwgcHJlZ19tYXRjaCgn
I140XC4oMFwuWzItOV18KDFbODldKSl8KDFcLlsyLTldKSMnLCAkbXlzcWx2ZXJzaW9uKSkN
CgkJCT8gIiBFTkdJTkU9TXlJU0FNICINCgkJCQkJOiAiIFRZUEU9TXlJU0FNICI7DQoNCgkJ
CWlmICggaXNzZXQoJHR4cGNmZ1snZGJjaGFyc2V0J10pICYmIChpbnR2YWwoJG15c3FsdmVy
c2lvblswXSkgPj0gNSB8fCBwcmVnX21hdGNoKCcjXjRcLlsxLTldIycsICRteXNxbHZlcnNp
b24pKSkNCgkJCQkkdGFibGV0eXBlIC49ICIgQ0hBUkFDVEVSIFNFVCA9ICIuICR0eHBjZmdb
J2RiY2hhcnNldCddIC4iICI7DQoNCgkJCS8vIENyZWF0ZSB0aGUgdHhwX2ZseV9jYXRfcmVz
dHJpY3Rpb25zIHRhYmxlDQoJCQkkZmx5X2NhdF9yZXN0cmljdGlvbnNUYWJsZSA9IHNhZmVf
cXVlcnkoIkNSRUFURSBUQUJMRSBgIiAuIFBGWCAuICJ0eHBfZmx5X2NhdF9yZXN0cmljdGlv
bmAgKA0KCQkJCQlgaWRgIGludCgxMSkgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsDQoJCQkJ
CWBzZWN0aW9uYCBWQVJDSEFSKDEyOCkgTk9UIE5VTEwsDQoJCQkJCWBjYXRlZ29yeWAgVkFS
Q0hBUig2NCkgTk9UIE5VTEwsDQoJCQkJCVBSSU1BUlkgS0VZIChgaWRgKSwNCiAgCQkJCQlV
TklRVUUgS0VZIGBpZGAgKGBpZGApDQoJCQkpICR0YWJsZXR5cGUiKTsNCg0KCQl9DQoNCgl9
DQoNCg0KCS8qKg0KCSAqDQoJICogdW5pbnN0YWxsIC0gVW5pbnN0YWxsIERhdGFiYXNlIFRh
YmxlIHR4cF9mbHlfY2F0X3Jlc3RyaWN0aW9uDQoJICoNCgkgKi8NCglmdW5jdGlvbiB1bmlu
c3RhbGwoKSB7DQoNCgkJaWYgKCBnZXRUaGluZ3MoIlNob3cgdGFibGVzIGxpa2UgJyIgLiBQ
RlggLiAidHhwX2ZseV9jYXRfcmVzdHJpY3Rpb24nIikgKSB7DQoNCgkJCSRzcWwgPSAiRFJP
UCBUQUJMRSBJRiBFWElTVFMgIiAuIFBGWCAuICJ0eHBfZmx5X2NhdF9yZXN0cmljdGlvbjsi
Ow0KDQoJCQkkZHJvcFRhYmxlID0gc2FmZV9xdWVyeSgkc3FsKTsNCg0KCQl9DQoNCgkJJHNx
bFByZWYgPSAiREVMRVRFIEZST00gICIgLiBQRlggLiAidHhwX3ByZWZzIFdIRVJFIG5hbWU9
J2ZseV9yZXN0cmljdF9jYXRfcHJlZic7IjsNCgkJJGRlbGV0ZVByZWYgPSBzYWZlX3F1ZXJ5
KCRzcWxQcmVmKTsNCg0KDQoJfQ0KDQoNCgkvKioNCgkgKg0KCSAqIFNhdmVzIENhdGVnb3Jp
ZXMgZnJvbSBIVE1MIEZvcm0gdG8gRGF0YWJhc2UNCgkgKg0KCSAqIEBwYXJhbSBzdHJpbmcg
JF9QT1NUWydzZWN0aW9uJ10NCgkgKiBAcGFyYW0gYXJyYXkgJF9QT1NUWydjYXRlZ29yaWVz
J10NCgkgKiBAdXNlcyBsaWIvdHhwbGliX3RoZW1lLnBocCAtIGFubm91bmNlKCkNCgkgKiBA
cmV0dXJuIHN0cmluZyAtIEFkbWluIFRoZW1lIE5vdGlmaWNhdGlvbiBtZXNzYWdlDQoJICoN
CgkgKi8NCglmdW5jdGlvbiBzYXZlKCkgew0KDQoJCSRzZWN0aW9uID0gZ3BzKCdzZWN0aW9u
Jyk7DQoJCSRjYXRlZ29yaWVzID0gYXJyYXlfZmlsdGVyKCBhcnJheV9tYXAoJ2FycmF5X2Zp
bHRlcicsIGdwcygnY2F0ZWdvcmllcycpKSApOw0KDQoJCSRzcWxDYXQgPSAnJzsNCgkJJHNx
bERlbENhdCA9ICcnOw0KCQlpZiAoICFlbXB0eSgkY2F0ZWdvcmllcykgKXsNCg0KCQkJZm9y
ZWFjaCAoJGNhdGVnb3JpZXMgYXMgJGNhdGVnb3J5KSB7DQoNCgkJCQkkc3FsRGVsQ2F0IC49
ICggIWVtcHR5KCRjYXRlZ29yeVsnaWQnXSkgJiYgIWVtcHR5KCRjYXRlZ29yeVsnbmFtZSdd
KSA/ICJpZCAhPSAnIiAuICRjYXRlZ29yeVsnaWQnXSAuICInIEFORCAiIDogJycpOw0KDQoJ
CQkJJHNxbENhdCAuPSAoIGVtcHR5KCRjYXRlZ29yeVsnaWQnXSkgJiYgIWVtcHR5KCRjYXRl
Z29yeVsnbmFtZSddKSA/ICIoJycsICciIC4gJHNlY3Rpb24gLiAiJywgJyIgLiAkY2F0ZWdv
cnlbJ25hbWUnXSAuICInKSwgIiA6ICcnKTsNCg0KCQkJfQ0KDQoNCgkJCWlmICggIWVtcHR5
KCRzcWxEZWxDYXQpICkNCgkJCQkkc3FsRGVsQ2F0ID0gJ0FORCAoJyAuIHRyaW0oJHNxbERl
bENhdCwgJ0FORCAnKSAuICcpJzsNCg0KCQkJJHNxbERlbCA9ICJERUxFVEUgRlJPTSAiIC4g
UEZYIC4gInR4cF9mbHlfY2F0X3Jlc3RyaWN0aW9uIFdIRVJFIHNlY3Rpb249JyIgLiAkc2Vj
dGlvbiAuICInIiAuICRzcWxEZWxDYXQ7DQoJCQkkZGVsZXRlID0gc2FmZV9xdWVyeSgkc3Fs
RGVsKTsNCg0KDQoJCQkkc3FsQ2F0ID0gdHJpbSgkc3FsQ2F0LCAnLCAnKTsNCgkJCWlmICgg
IWVtcHR5KCRzcWxDYXQpICl7DQoNCgkJCQkkc3FsID0gIklOU0VSVCBJTlRPICIgLiBQRlgg
LiAidHhwX2ZseV9jYXRfcmVzdHJpY3Rpb24gVkFMVUVTICIgLiAkc3FsQ2F0Ow0KCQkJCSRp
bnNlcnQgPSBzYWZlX3F1ZXJ5KCRzcWwpOw0KDQoJCQl9DQoNCgkJCXJldHVybiAkdGhpcy0+
dGhlbWUtPmFubm91bmNlKCAnU2F2ZWQgcmVzdHJpY3RlZCBDYXRlZ3JvaWVzJyApOw0KDQoJ
CX0NCg0KDQoJfQ0KDQoNCgkvKioNCgkgKg0KCSAqIHNhdmVQcmVmIC0gU2F2ZSBzZXR0aW5n
IHRvIHNob3cvaGlkZSByZXN0cmljdGVkIENhdGVnb3JpZXMgaW4gV3JpdGUgUGFuZWwNCgkg
Kg0KCSAqIEBwYXJhbSBzdHJpbmcgJF9QT1NUWydmbHlfcmVzdHJpY3RfY2F0X3ByZWYnXQ0K
CSAqIEB1c2VzIGxpYi90eHBsaWJfdGhlbWUucGhwIC0gYW5ub3VuY2VfYXN5bmMoKQ0KCSAq
IEByZXR1cm4gc3RyaW5nIC0gQWRtaW4gVGhlbWUgSmF2YXNjcmlwdCBOb3RpZmljYXRpb24g
bWVzc2FnZQ0KCSAqDQoJICovDQoJZnVuY3Rpb24gc2F2ZVByZWYoKXsNCg0KCQlpZiAoIGdw
cygnZmx5X3Jlc3RyaWN0X2NhdF9wcmVmJykgPT0gJ3RydWUnICl7DQoNCgkJCXNldF9wcmVm
KCdmbHlfcmVzdHJpY3RfY2F0X3ByZWYnLCB0cnVlLCAnZmx5X2NhdF9yZXN0cmljdGlvbicp
Ow0KCQkJZWNobyAkdGhpcy0+dGhlbWUtPmFubm91bmNlX2FzeW5jKCAnUmVzdHJpY3RlZCBD
YXRlZ29yaWVzIGFyZSBoaWRkZW4nICk7DQoNCgkJfSBlbHNlIHsNCg0KCQkJc2V0X3ByZWYo
J2ZseV9yZXN0cmljdF9jYXRfcHJlZicsIGZhbHNlLCAnZmx5X2NhdF9yZXN0cmljdGlvbicp
Ow0KCQkJZWNobyAkdGhpcy0+dGhlbWUtPmFubm91bmNlX2FzeW5jKCAnUmVzdHJpY3RlZCBD
YXRlZ29yaWVzIGFyZSBzaG93bicpOw0KDQoJCX0NCg0KCX0NCg0KDQoJLyoqDQoJICoNCgkg
KiBMb2FkcyBhbGwgcmVzdHJpY3RldCBDYXRnb3JpZXMgZnJvbSB0aGUgZGF0YWJhc2UgYW5k
IGNvbnZlcnRzIHRoZSByZXN1bHQgdG8gSlNPTg0KCSAqDQoJICogQHJldHVybiBzdHJpbmcg
JHJlc3RyaWN0aW9uIC0gSlNPTiBFbmNvZGVkIFJlc3VsdDogS2V5IGlzIFNlY3Rpb25uYW1l
IC0gVmFsdWVzIGFyZSBDYXRlZ29yeSBOYW1lIGFuZCBJRA0KCSAqDQoJICovDQoJZnVuY3Rp
b24gcmVzdHJpY3Rpb25zX0pTT04oKSB7DQoNCgkJJHNxbCA9ICJTRUxFQ1QgKiBGUk9NICIg
LiBQRlggLiAidHhwX2ZseV9jYXRfcmVzdHJpY3Rpb24gT1JERVIgQlkgc2VjdGlvbiBERVND
IjsNCg0KCQkkcmVzdWx0ID0gZ2V0Um93cygkc3FsKTsNCg0KCQlpZiAoICRyZXN1bHQgPT0g
dHJ1ZSApew0KDQoJCQkkaT0xOyAvLyBOVE1TOiB3ZSBjYW50IHVzZSB0aGUgYXJyYXkga2V5
LiBqc29uX2VuY29kZSgpIHdvdWxkIG1ha2UgYW4gSlMtYXJyYXkgZnJvbSBhcnJheSBrZXkg
JzAnLCBhbmQgbm90IHRoZSBkZXNpcmVkIEpTLW9iamVjdA0KCQkJZm9yZWFjaCAoJHJlc3Vs
dCBhcyAkaXRlbSkgew0KDQoJCQkJJGZpbHRlckl0ZW1bICRpdGVtWydzZWN0aW9uJ10gXVsk
aV1bJ25hbWUnXSA9ICRpdGVtWydjYXRlZ29yeSddOw0KCQkJCSRmaWx0ZXJJdGVtWyAkaXRl
bVsnc2VjdGlvbiddIF1bJGldWydpZCddID0gJGl0ZW1bJ2lkJ107DQoJCQkJJGkrKzsNCg0K
CQkJfQ0KDQoJCQkkcmVzdHJpY3Rpb24gPSBqc29uX2VuY29kZSggJGZpbHRlckl0ZW0gKTsN
Cg0KCQl9IGVsc2UNCgkJCSRyZXN0cmljdGlvbiA9ICJbe31dIjsNCg0KCQlyZXR1cm4gJHJl
c3RyaWN0aW9uOw0KDQoNCgl9DQoNCg0KCS8qKg0KCSAqDQoJICogYWRtaW5wYWdlIC0gQWRt
aW4gUGFnZSB0byBjb25maWd1cmUgYW5kIHNhdmUgcmVzdHJpY3RldCBjYXRlZ29yaWVzDQoJ
ICoNCgkgKiBAcmV0dXJuIHN0cmluZyBIVE1MIENvZGUNCgkgKg0KCSAqLw0KCWZ1bmN0aW9u
IGFkbWlucGFnZSgpIHsNCg0KDQoJCWlmICggIWVtcHR5KCAkX1BPU1RbJ3N0ZXAnXSApID09
ICdzYXZlJyApDQoJCQkkc2F2ZU1zZyA9ICR0aGlzLT5zYXZlKCk7DQoNCg0KCQlwYWdldG9w
KCAnQXJ0aWNsZSBDYXRlZ29yeSBSZXN0cmljdGlvbnMnICk7DQoNCgkJZWNobyAnPGRpdiBj
bGFzcz0idGV4dC1jb2x1bW4iPicgLiAiXG4iOw0KDQoJCQllY2hvICc8aDE+Q2F0ZWdvcnkg
UmVzdHJpY3Rpb25zPC9oMT4nIC4gIlxuIjsNCgkJCWVjaG8gJzxwPlRoaXMgcGx1Z2luIG9u
bHkgd29ya3Mgd2l0aCBBcnRpY2xlLUNhdGVnb3JpZXMuIE9ubHkgcGFyZW50IGNhdGVnb3Jp
ZXMgY2FuIGJlIGRpc2FibGVkLiBTdWItY2F0ZWdvcmllcyBnZXQgYXV0b21hdGljYWxseSBk
aXNhYmxlZCBpZiBQYXJlbnQtQ2F0ZWdvcnkgaXMgZGlzYWJsZWQuPC9wPicgLiAiXG4iOw0K
DQoJCQllY2hvICc8ZGl2PicgLiBmb3JtKA0KDQoJCQkJJzxsYWJlbCBmb3I9InNhdmVfcHJl
ZiI+JyAuDQoJCQkJY2hlY2tib3goJ2ZseV9yZXN0cmljdF9jYXRfcHJlZicsICciIG9uY2hh
bmdlPSJzYXZlUHJlZih0aGlzKTsgJywgMCwgbnVsbCwgJ3NhdmVfcHJlZicpIC4NCgkJCQkn
SGlkZSByZXN0cmljdGVkIENhdGVnb3JpZXMgaW4gRHJvcGRvd24gTWVudSBvbiBXcml0ZSBQ
YW5lbDwvbGFiZWw+Jw0KDQoJCQkpIC4gIlxuIjsNCg0KCQkJZWNobyAnPC9kaXY+PGJyLz4n
IC4gIlxuIjsNCg0KCQkJZWNobyAnPHN0eWxlIHR5cGU9InRleHQvY3NzIj5sYWJlbCB7ZGlz
cGxheTpibG9jazsgY3Vyc29yOnBvaW50ZXI7fTwvc3R5bGU+JyAuICJcbiI7DQoNCgkJCWVj
aG8gZm9ybSgNCg0KCQkJCQlzdGFydFRhYmxlKCcnLCAnbGVmdCcsICd0eHAtbGlzdCcsICc1
JywgJzMwJScpIC4NCg0KCQkJCQkJJzx0aGVhZD4nLiAgdHIgKCBoQ2VsbCgnQ2hvb3NlIGEg
c2VjdGlvbiBhbmQgZGlzYWJsZSB0aGUgZGVzaXJlZCBjYXRlZ29yaWVzJywgbnVsbCkgKSAu
ICc8L3RoZWFkPicuDQoNCgkJCQkJCXRyKCB0ZGEoJHRoaXMtPnNlY3Rpb25zX2Ryb3Bkb3du
KCksICcgY2xhc3M9ImFsaWduLWNlbnRlciInKSApDQoNCgkJCQkJCS4gJHRoaXMtPmNhdGVn
b3JpZXNfY2hlY2tib3hlcygpIC4NCg0KCQkJCQkJdHIoDQoJCQkJCQkJdGRhKA0KCQkJCQkJ
CQknPHA+JyAuIGZJbnB1dCggJ3N1Ym1pdCcsICdzYXZlJywgJ1NhdmUgQ2F0ZWdvcmllcycs
ICdwdWJsaXNoJyAgKSAuICc8L3A+JyAuDQoJCQkJCQkJCXNJbnB1dCggJ3NhdmUnICkgLg0K
CQkJCQkJCQllSW5wdXQoICdmbHlfY2F0X3Jlc3RyaWN0aW9uJyApLA0KCQkJCQkJCQknIHN0
eWxlPSJ0ZXh0LWFsaWduOmNlbnRlciInDQoJCQkJCQkJKQ0KCQkJCQkJKSAuDQoNCgkJCQkJ
ZW5kVGFibGUoKSwNCgkJCQkJbnVsbCwNCgkJCQkJbnVsbCwNCgkJCQkJJ3Bvc3QnLA0KCQkJ
CQludWxsLA0KCQkJCQludWxsLA0KCQkJCQkndGhlRm9ybScNCg0KCQkJKTsgLy8gZm9ybSgp
IEVORA0KDQoJCWVjaG8gJzwvZGl2PjxiciBjbGVhcj0iYWxsIi8+JzsNCg0KCQllY2hvICR0
aGlzLT5qYXZhc2NyaXB0KCdjaGVja2JveCcpOw0KDQoJCWVjaG8gJzxici8+PHAgYWxpZ249
ImNlbnRlciI+PHNtYWxsPlRoaXMgUGx1Z2luIHdhcyBtYWRlIGJ5ICcgLiBocmVmKCdmbHl3
ZWIgUHJvZHVjdGlvbnMnLCAnaHR0cDovL3d3dy5mbHl3ZWIuYXQnKSAuICcuPC9zbWFsbD48
L3A+JyAuICJcbiI7DQoNCgkJaWYgKCFlbXB0eSgkc2F2ZU1zZykpDQoJCQllY2hvICRzYXZl
TXNnOw0KDQoJfQ0KDQoNCgkvKioNCgkgKg0KCSAqIEhUTUwgRHJvcGRvd24gTWVudSB3aXRo
IFNlY3Rpb24gTmFtZXMNCgkgKg0KCSAqIEBwYXJhbSBzdHJpbmcgJF9QT1NUWydzZWN0aW9u
XSAtIElmIHByZXNlbnQgU2VjdGlvbiBnZXRzIHByZXNlbGVjdGVkIGluIERyb3Bkb3duIE1l
bnUNCgkgKiBAcmV0dXJuIHN0cmluZyAkZHJvcGRvd24gLSBIVE1MIERyb3Bkb3duIE1lbnUN
CgkgKg0KCSAqLw0KCWZ1bmN0aW9uIHNlY3Rpb25zX2Ryb3Bkb3duKCkgew0KDQoJCSRkcm9w
ZG93biA9ICcnOw0KCQkkc2VjdGlvbiA9IGdwcygnc2VjdGlvbicpOw0KDQoJCSRnZXRTZWN0
aW9ucyA9IHNhZmVfY29sdW1uKCduYW1lJywgUEZYIC4gJ3R4cF9zZWN0aW9uJywgIm5hbWUg
IT0gJ2RlZmF1bHQnIik7DQoNCgkJaWYgKCRnZXRTZWN0aW9ucykgew0KDQoJCQkkZHJvcGRv
d24gLj0gJzxsYWJlbCBmb3I9InNlY3Rpb24iPlNlY3Rpb24gJyAuICJcbiI7DQoJCQkkZHJv
cGRvd24gLj0gc2VsZWN0SW5wdXQoJ3NlY3Rpb24nLCAkZ2V0U2VjdGlvbnMsICRzZWN0aW9u
LCBmYWxzZSwgJycsICdzZWN0aW9uJyk7DQoJCQkkZHJvcGRvd24gLj0gJzwvbGFiZWw+JyAu
ICJcbiI7DQoNCgkJfQ0KDQoJCXJldHVybiAkZHJvcGRvd247DQoNCgl9DQoNCg0KCS8qKg0K
CSAqDQoJICogSFRNTCBUYWJsZSBSb3dzIHdpdGggQ2F0ZWdwb3JpZSBDaGVja2JveGVzIGZv
ciBnaXZlbiBTZWN0aW9uDQoJICoNCgkgKiBAcmV0dXJuIHN0cmluZyAkcm93cw0KCSAqDQoJ
ICovDQoJZnVuY3Rpb24gY2F0ZWdvcmllc19jaGVja2JveGVzKCkgew0KDQoJCSRyb3dzID0g
Jyc7DQoNCgkJJGdldENhdGVnb3JpZXMgPSBnZXRUcmVlKCdyb290JywgJ2FydGljbGUnKTsN
Cg0KCQlpZiAoJGdldENhdGVnb3JpZXMpIHsNCg0KCQkJZm9yZWFjaCAoJGdldENhdGVnb3Jp
ZXMgYXMgJGNhdEtleSA9PiAkY2F0ZWdvcnkpIHsNCg0KCQkJCWlmICggJGNhdGVnb3J5Wydw
YXJlbnQnXSA9PSAncm9vdCcgKXsNCg0KCQkJCQkkY2VsbCA9DQoJCQkJCQl0ZGEoDQoJCQkJ
CQkJJzxsYWJlbCBmb3I9ImNhdC0nIC4gJGNhdGVnb3J5WyduYW1lJ10gLiAnIj4nIC4NCgkJ
CQkJCQljaGVja2JveCgnY2F0ZWdvcmllc1snIC4gJGNhdEtleSAuICddW25hbWVdJywgJGNh
dGVnb3J5WyduYW1lJ10sIDAsIG51bGwsICdjYXQtJyAuICRjYXRlZ29yeVsnbmFtZSddKSAu
DQoJCQkJCQkJJGNhdGVnb3J5Wyd0aXRsZSddIC4gJzwvbGFiZWw+JyAuDQoJCQkJCQkJaElu
cHV0KCAnY2F0ZWdvcmllc1snIC4gJGNhdEtleSAuICddW2lkXScsICcnKQ0KCQkJCQkJKTsN
Cg0KCQkJCX0gZWxzZSB7DQoNCgkJCQkJJGNlbGwgPSB0ZGEoICcmIzE2MDsmIzE2MDsmIzE2
MDsmIzE2MDsmIzE2MDsmIzE2MDsnIC4gJGNhdGVnb3J5Wyd0aXRsZSddKTsNCg0KCQkJCX0N
Cg0KCQkJCSRyb3dzIC49IHRyKCAkY2VsbCApOw0KCQkJfQ0KDQoJCX0NCg0KCQlyZXR1cm4g
JHJvd3M7DQoNCgl9DQoNCg0KCS8qKg0KCSAqDQoJICogamF2YXNjcmlwdCAtIEphdmFzY3Jp
cHQgRnVuY3Rpb25zIGZvciBXcml0ZSBQYW5lbCBhbmQgQWRtaW4gUGFnZS4NCgkgKg0KCSAq
IEBwYXJhbSAgc3RyaW5nICRlbGVtZW50IC0gU2V0IEpTLUZ1bmN0aW9uIGZvciAiZHJvcGRv
d24iIChXcml0ZSBQYW5lbCkgb3IgImNoZWNrYm94IiAoQWRtaW4gUGFnZSkNCgkgKiBAdXNl
cyBqUXVlcnkNCgkgKiBAcmV0dXJuIHN0cmluZyAkaHRtbA0KCSAqDQoJICovDQoJZnVuY3Rp
b24gamF2YXNjcmlwdCgkZWxlbWVudD0nZHJvcGRvd24nKSB7DQoNCgkJJEpTT04gPSAkdGhp
cy0+cmVzdHJpY3Rpb25zX0pTT04oKTsNCg0KCQkkY2xhc3MgPSAoIGdldF9wcmVmKCdmbHlf
cmVzdHJpY3RfY2F0X3ByZWYnKSA/ICdyZXN0cmljdGVkSGlkZGVuJyA6ICdyZXN0cmljdGVk
JyApOw0KDQoNCgkJJGh0bWwgPSAnPHN0eWxlIHR5cGU9InRleHQvY3NzIj4gLnJlc3RyaWN0
ZWQge2JhY2tncm91bmQtY29sb3I6IHJlZDsgY29sb3I6IHdoaXRlOyB9IC5yZXN0cmljdGVk
SGlkZGVuIHsgZGlzcGxheTpub25lOyB9PC9zdHlsZT4nIC4gIlxuIjsNCg0KCQkkaHRtbCAu
PSAiPHNjcmlwdCB0eXBlPVwidGV4dC9qYXZhc2NyaXB0XCI+DQoNCgkJCWpRdWVyeShmdW5j
dGlvbigpIHsNCg0KCQkJCXZhciBmaWx0ZXIgPSBKU09OLnBhcnNlKCckSlNPTicpOw0KDQoN
CgkJCQkkKCcjc2VjdGlvbicpLmNoYW5nZSggZnVuY3Rpb24oKSB7DQoNCgkJCQkJaWYoIGZp
bHRlci5oYXNPd25Qcm9wZXJ0eSh0aGlzLnZhbHVlKSA9PSB0cnVlICl7DQoNCgkJCQkJCWNh
dE9iaiA9IGZpbHRlclt0aGlzLnZhbHVlXTsNCg0KCQkJCQl9IGVsc2Ugew0KDQoJCQkJCQlj
YXRPYmogPSBbXTsNCg0KCQkJCQl9DQoNCgkJCQkJZndfY2F0XyRlbGVtZW50KGNhdE9iaik7
DQoNCg0KCQkJCX0pLmNoYW5nZSgpOw0KDQoNCg0KCQkJCSQoXCJpbnB1dFtpZF49J2NhdC0n
XVwiKS5jaGFuZ2UoIGZ1bmN0aW9uKCkgew0KDQoJCQkJCQkkKHRoaXMpLnBhcmVudHMoJ3Ry
JykudG9nZ2xlQ2xhc3MoJ3NlbGVjdGVkJyk7DQoNCgkJCQkJfQ0KDQoJCQkJKTsNCg0KDQoN
CgkJCQlmdW5jdGlvbiBmd19jYXRfY2hlY2tib3goY2F0T2JqKSB7DQoNCgkJCQkJJChcImlu
cHV0W2lkXj0nY2F0LSddXCIpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7DQoJCQkJCSQoXCJp
bnB1dFtpZF49J2NhdC0nXVwiKS5wYXJlbnRzKCd0cicpLnJlbW92ZUNsYXNzKCdzZWxlY3Rl
ZCcpOw0KCQkJCQkkKFwiaW5wdXRbaWRePSdjYXQtJ11cIikucGFyZW50KCkubmV4dCgnaW5w
dXQnKS5wcm9wKCd2YWx1ZScsICcnKTsNCg0KCQkJCQlPYmplY3Qua2V5cyhjYXRPYmopLmZv
ckVhY2goZnVuY3Rpb24gKGtleSkgew0KDQoJCQkJCSAgICB2YXIgdmFsID0gY2F0T2JqW2tl
eV07DQoNCgkJCQkJCSQoXCIjY2F0LVwiICsgdmFsLm5hbWUpLnByb3AoJ2NoZWNrZWQnLCB0
cnVlKTsNCgkJCQkJCSQoXCIjY2F0LVwiICsgdmFsLm5hbWUpLnBhcmVudHMoJ3RyJykuYWRk
Q2xhc3MoJ3NlbGVjdGVkJyk7DQoJCQkJCQkkKFwiI2NhdC1cIiArIHZhbC5uYW1lKS5wYXJl
bnQoKS5uZXh0KCdpbnB1dCcpLnByb3AoJ3ZhbHVlJywgdmFsLmlkKTsNCg0KCQkJCQl9KTsN
Cg0KCQkJCX07DQoNCg0KCQkJCWZ1bmN0aW9uIGZ3X2NhdF9kcm9wZG93bihjYXRPYmopIHsN
Cg0KCQkJCQkkKFwic2VsZWN0W25hbWU9J0NhdGVnb3J5MSddIG9wdGlvbjpndCgwKSwgc2Vs
ZWN0W25hbWU9J0NhdGVnb3J5MiddIG9wdGlvbjpndCgwKVwiKS5hdHRyKCdkaXNhYmxlZCcs
IGZhbHNlKTsNCgkJCQkJJChcInNlbGVjdFtuYW1lPSdDYXRlZ29yeTEnXSBvcHRpb246Z3Qo
MCksIHNlbGVjdFtuYW1lPSdDYXRlZ29yeTInXSBvcHRpb246Z3QoMClcIikucmVtb3ZlQ2xh
c3MoJyRjbGFzcycpOw0KDQoJCQkJCU9iamVjdC5rZXlzKGNhdE9iaikuZm9yRWFjaChmdW5j
dGlvbiAoa2V5KSB7DQoNCgkJCQkJICAgIHZhciB2YWwgPSBjYXRPYmpba2V5XTsNCg0KCQkJ
CQkJJChcIiNjYXRlZ29yaWVzX2dyb3VwIG9wdGlvblt2YWx1ZT0nXCIgKyB2YWwubmFtZSAr
IFwiJ11cIikuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTsNCgkJCQkJCSQoXCIjY2F0
ZWdvcmllc19ncm91cCBvcHRpb25bdmFsdWU9J1wiICsgdmFsLm5hbWUgKyBcIiddXCIpLmF0
dHIoJ3NlbGVjdGVkJywgZmFsc2UpOw0KCQkJCQkJJChcIiNjYXRlZ29yaWVzX2dyb3VwIG9w
dGlvblt2YWx1ZT0nXCIgKyB2YWwubmFtZSArIFwiJ11cIikubmV4dFVudGlsKCAkKFwiIG9w
dGlvbjpub3QoOmNvbnRhaW5zKCdcdTAwYTAnKSkgXCIpICkuYXR0cignZGlzYWJsZWQnLCAn
ZGlzYWJsZWQnKTsNCgkJCQkJCSQoXCIjY2F0ZWdvcmllc19ncm91cCBvcHRpb25bdmFsdWU9
J1wiICsgdmFsLm5hbWUgKyBcIiddXCIpLmFkZENsYXNzKCckY2xhc3MnKTsNCgkJCQkJCSQo
XCIjY2F0ZWdvcmllc19ncm91cCBvcHRpb25bdmFsdWU9J1wiICsgdmFsLm5hbWUgKyBcIidd
XCIpLm5leHRVbnRpbCggJChcIiBvcHRpb246bm90KDpjb250YWlucygnXHUwMGEwJykpIFwi
KSApLmFkZENsYXNzKCckY2xhc3MnKTsNCg0KCQkJCQl9KTsNCg0KCQkJCX07DQoNCgkJCX0p
Ow0KDQoJCQlmdW5jdGlvbiBzYXZlUHJlZihwcmVmKXsNCg0KCQkJCXNlbmRBc3luY0V2ZW50
KA0KDQoJCQkJCXsNCgkJCQkJCWV2ZW50OiB0ZXh0cGF0dGVybi5ldmVudCwNCgkJCQkJCXN0
ZXA6ICdzYXZlUHJlZicsDQoJCQkJCQlmbHlfcmVzdHJpY3RfY2F0X3ByZWY6IHByZWYuY2hl
Y2tlZA0KDQoJCQkJCX0sIG51bGwsICdzY3JpcHQnDQoNCgkJCQkpOw0KCQkJfTsNCg0KCQk8
L3NjcmlwdD4iOw0KDQoJCWVjaG8gJGh0bWw7DQoNCgl9DQoNCg0KDQp9IC8vIGNsYXNzIGZs
eV9jYXRfcmVzdHJpY3Rpb25zQ2xhc3MoKSBFTkQNCiI7czo0OiJ0eXBlIjtzOjE6IjQiO3M6
NToib3JkZXIiO3M6MToiNSI7czo1OiJmbGFncyI7czoxOiIzIjtzOjQ6ImhlbHAiO3M6NTIy
OiI8aDE+Q2F0ZWdvcnkgUmVzdHJpY3Rpb25zPC9oMT4KPHA+V2l0aCB0aGlzIFBsdWdpbiB5
b3UgY2FuIHJlc3RyaWN0IEFydGljbGUtQ2F0ZWdvcmllcyBmcm9tIHNwZWNpZmljIHNlY3Rp
b25zIGluIHRoZSBXcml0ZSBQYW5lbHMgQ2F0ZWdvcmllcyBEcm9wZG93bnMuPC9wPgo8aDI+
SW5zdGFsbGF0aW9uPC9oMj4KPHA+QWZ0ZXIgaW5zdGFsbGluZyB0aGUgUGx1Z2luIHlvdSBj
YW4gZmluZCB0aGUgU2V0dGluZ3MgUGFnZSAiQ2F0ZWdvcnkgUmVzdHJpY3Rpb25zIiB1bmRl
ciB0aGUgRXh0ZW5zaW9ucyBUYWIuPC9wPgo8aDI+Q2hhbmdlbG9nPC9oMj4KPHA+PHN0cm9u
Zz5WZXJzaW9uIDEuMDwvc3Ryb25nPiBJbml0aWFsIHJlbGVhc2UgLSAgMDMuIEZlYi4gMjAx
NTwvcD4KPGJyPjxicj48YnI+PGJyPjxicj48aHI+PHAgYWxpZ249ImNlbnRlciI+PHNtYWxs
PlRoaXMgUGx1Z2luIHdhcyBtYWRlIGJ5IDxhIGhyZWY9Imh0dHA6Ly93d3cuZmx5d2ViLmF0
Ij4gZmx5d2ViIFByb2R1Y3Rpb25zPC9hPi48L3NtYWxsPjwvcD4iO3M6MzoibWQ1IjtzOjMy
OiIwYjQzZDg1MDExOTU1NDA1ZDcyMTYxMmZhOTRmYjQwOSI7fQ==
